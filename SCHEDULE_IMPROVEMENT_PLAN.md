# План улучшения системы расписания групп

## 🎯 Цель
Создать профессиональную систему управления расписанием групп с возможностью долгосрочного планирования, гибкой настройки и удобного управления.

## 📋 Текущие проблемы
- ❌ Только дни недели (dayOfWeek), нет привязки к конкретным датам
- ❌ Ограниченная генерация - только случайные занятия
- ❌ Нет долгосрочного планирования (3-4 месяца)
- ❌ Отсутствие календарного вида по месяцам/неделям
- ❌ Нет ручного управления датами
- ❌ Простой интерфейс без гибких настроек

## 🚀 Новый функционал

### 1. Продвинутая генерация расписания
- **Выбор периода:** 1, 2, 3, 6, 12 месяцев
- **Настройка дней недели:** Выбор конкретных дней (Пн, Вт, Ср, Чт, Пт, Сб, Вс)
- **Настройка времени:** Для каждого дня отдельное время начала/окончания
- **Предварительный просмотр:** Показать что будет создано перед генерацией
- **Массовая генерация:** Для нескольких групп одновременно

### 2. Три вида отображения
- **📋 Список** - все занятия в таблице с фильтрацией
- **📅 Неделя** - расписание по дням недели
- **🗓️ Месяц** - календарный вид по месяцам

### 3. Управление занятиями
- **Индивидуальное редактирование:** Изменение времени, даты, учителя
- **Массовые операции:**
  - ✅ Активация/деактивация
  - 🗑️ Удаление (только будущих занятий)
  - 📋 Копирование расписания
- **Безопасность:** Защита от удаления прошедших занятий

### 4. Улучшенный интерфейс
- **Современный дизайн:** Чистый, интуитивный интерфейс
- **Адаптивность:** Работает на всех устройствах
- **Визуальные индикаторы:** Цветовая кодировка статусов
- **Конфликты:** Автоматическое обнаружение пересечений

## 🔧 Техническая реализация

### База данных
- Расширение модели `GroupSchedule` для поддержки конкретных дат
- Добавление поля `scheduledDate` (опционально)
- Сохранение совместимости с существующими данными

### API endpoints
- `POST /api/admin/schedule/generate-advanced` - продвинутая генерация
- `GET /api/admin/schedule/calendar` - календарные данные
- `DELETE /api/admin/schedule/bulk-delete-future` - массовое удаление будущих
- `PATCH /api/admin/schedule/bulk-update` - массовые операции

### Компоненты
- `ScheduleGenerator` - мастер генерации расписания
- `ScheduleCalendar` - календарный вид
- `ScheduleWeekView` - недельный вид
- `ScheduleListView` - список занятий
- `ScheduleFilters` - фильтры и поиск

## 📊 Примеры использования

### Сценарий 1: Создание курса на 3 месяца
1. Выбираем группу "WordPress Advanced"
2. Устанавливаем период: 3 месяца
3. Выбираем дни: Понедельник, Среда, Пятница
4. Настраиваем время: Пн/Ср 18:00-19:30, Пт 19:00-20:30
5. Генерируем расписание на весь период
6. Просматриваем в месячном виде

### Сценарий 2: Массовое управление
1. Переходим в список занятий
2. Фильтруем по группе "Shopify Basic"
3. Выбираем все будущие занятия
4. Массово удаляем или изменяем время

## 🎨 Дизайн интерфейса

```
┌─────────────────────────────────────────────────────────┐
│ 📅 Расписание групп                    [Генерировать] │
├─────────────────────────────────────────────────────────┤
│ [Список] [Неделя] [Месяц]  🔍 Поиск  👤 Фильтр        │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  📋 СПИСОК ЗАНЯТИЙ                                      │
│  ┌─────────────────────────────────────────────────────┐ │
│  │ ☐ Группа    │ Учитель │ День  │ Время  │ Статус   │ │
│  │ ☐ WordPress │ Иван    │ Пн    │ 18:00  │ ✅ Активно│ │
│  │ ☐ Shopify   │ Мария   │ Ср    │ 19:00  │ ⏸️ Пауза │ │
│  └─────────────────────────────────────────────────────┘ │
│                                                         │
│  [Выбрать все] [Удалить выбранные] [Активировать]      │
└─────────────────────────────────────────────────────────┘
```

## 📅 Этапы реализации

### Этап 1: Подготовка (1-2 часа)
- [x] Анализ текущего кода
- [x] Создание плана
- [ ] Создание новых API endpoints
- [ ] Обновление схемы базы данных

### Этап 2: Генератор расписания (2-3 часа)
- [ ] Компонент ScheduleGenerator
- [ ] API для продвинутой генерации
- [ ] Валидация и предварительный просмотр

### Этап 3: Три вида отображения (3-4 часа)
- [ ] ScheduleListView (список)
- [ ] ScheduleWeekView (неделя)
- [ ] ScheduleCalendar (месяц)
- [ ] Переключение между видами

### Этап 4: Управление занятиями (2-3 часа)
- [ ] Массовые операции
- [ ] Редактирование отдельных занятий
- [ ] Безопасное удаление будущих занятий

### Этап 5: Улучшения UI/UX (1-2 часа)
- [ ] Современный дизайн
- [ ] Фильтры и поиск
- [ ] Адаптивность
- [ ] Анимации и переходы

### Этап 6: Тестирование (1 час)
- [ ] Тестирование всех функций
- [ ] Проверка на конфликты
- [ ] Оптимизация производительности

## ⚡ Приоритеты
1. **Высокий:** Генерация расписания на длительный период
2. **Высокий:** Три вида отображения
3. **Средний:** Массовые операции
4. **Средний:** Улучшенный дизайн
5. **Низкий:** Дополнительные фичи

## 🎯 Ожидаемый результат
- ✅ Полноценная система управления расписанием
- ✅ Возможность планирования на месяцы вперед
- ✅ Удобный интерфейс с тремя видами
- ✅ Безопасное массовое управление
- ✅ Современный профессиональный дизайн

---
**Дата создания:** $(date)
**Статус:** В разработке
**Ответственный:** AI Assistant
