# План улучшения расписания отдельной группы

## 🎯 Основная задача
Улучшить страницу расписания отдельной группы `/admin/groups/[id]/schedule` с функционалом:
- Генерация расписания на длительный период (1-12 месяцев)
- Настройка дней недели и времени
- Массовое управление занятиями
- Три вида отображения (календарь, неделя, список)
- Оптимизация загрузки данных

## 📋 Текущие проблемы
- ❌ Страница `/admin/groups/[id]/schedule` не имеет продвинутого функционала
- ❌ Нет генерации расписания на длительный период
- ❌ Нет массового управления занятиями
- ❌ Медленная загрузка данных
- ❌ Простой интерфейс без гибких настроек

## 🚀 Новый функционал для отдельной группы

### 1. Продвинутая генерация расписания
- **Выбор периода:** 1, 2, 3, 6, 12 месяцев
- **Настройка дней недели:** Выбор конкретных дней (Пн, Вт, Ср, Чт, Пт, Сб, Вс)
- **Настройка времени:** Для каждого дня отдельное время начала/окончания
- **Предварительный просмотр:** Показ что будет создано перед генерацией
- **Генерация событий:** Создание Event записей на весь период

### 2. Три вида отображения
- **📋 Список** - все занятия группы в таблице с фильтрацией
- **📅 Неделя** - расписание по дням недели
- **🗓️ Месяц** - календарный вид по месяцам

### 3. Управление занятиями
- **Индивидуальное редактирование:** Изменение времени, даты, учителя
- **Массовые операции:**
  - ✅ Активация/деактивация
  - 🗑️ Удаление (только будущих занятий)
  - 📋 Копирование расписания
- **Безопасность:** Защита от удаления прошедших занятий

### 4. Оптимизация производительности
- **Ленивая загрузка:** Загружать только текущий месяц/неделю
- **Пагинация:** Показывать по 50-100 занятий за раз
- **Кэширование:** Сохранять данные в localStorage
- **Фильтрация на сервере:** Не загружать все данные сразу

## 🔧 Техническая реализация

### Обновление страницы группы
- **Файл:** `src/app/admin/groups/[id]/schedule/page.tsx`
- **Добавить:** Компоненты генератора и видов отображения
- **Интеграция:** С существующим API группы

### Новые API endpoints
- `POST /api/admin/groups/[id]/schedule/generate-advanced` - продвинутая генерация
- `GET /api/admin/groups/[id]/schedule/events` - события группы с пагинацией
- `DELETE /api/admin/groups/[id]/schedule/bulk-delete-future` - массовое удаление

### Компоненты
- `GroupScheduleGenerator` - генератор для конкретной группы
- `GroupScheduleCalendar` - календарный вид группы
- `GroupScheduleWeekView` - недельный вид группы
- `GroupScheduleListView` - список занятий группы

## 📊 Примеры использования

### Сценарий 1: Создание курса на 3 месяца
1. Заходим в группу "WordPress Advanced"
2. Переходим в раздел "Расписание"
3. Нажимаем "Создать расписание"
4. Устанавливаем период: 3 месяца
5. Выбираем дни: Понедельник, Среда, Пятница
6. Настраиваем время: Пн/Ср 18:00-19:30, Пт 19:00-20:30
7. Генерируем расписание на весь период

### Сценарий 2: Массовое управление
1. Переходим в список занятий группы
2. Фильтруем по датам (только будущие)
3. Выбираем все занятия
4. Массово удаляем или изменяем время

## 🎨 Дизайн интерфейса

```
┌─────────────────────────────────────────────────────────┐
│ 📅 Расписание группы "WordPress Advanced"              │
├─────────────────────────────────────────────────────────┤
│ [Создать расписание] [Быстрая генерация] [Экспорт]     │
├─────────────────────────────────────────────────────────┤
│ [Список] [Неделя] [Месяц]  🔍 Поиск  📅 Фильтр        │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  📋 СПИСОК ЗАНЯТИЙ ГРУППЫ                              │
│  ┌─────────────────────────────────────────────────────┐ │
│  │ ☐ Дата      │ Время  │ Учитель │ Статус  │ Действия│ │
│  │ ☐ 15.09.24  │ 18:00  │ Иван    │ ✅ Активно│ [✏️][🗑️]│ │
│  │ ☐ 17.09.24  │ 18:00  │ Иван    │ ⏸️ Пауза │ [✏️][🗑️]│ │
│  └─────────────────────────────────────────────────────┘ │
│                                                         │
│  [Выбрать все] [Удалить выбранные] [Активировать]      │
└─────────────────────────────────────────────────────────┘
```

## 📅 Этапы реализации

### Этап 1: Анализ и подготовка (30 мин)
- [x] Создание плана
- [ ] Анализ текущей страницы группы
- [ ] Определение API endpoints

### Этап 2: Оптимизация загрузки (1 час)
- [ ] Реализация пагинации
- [ ] Ленивая загрузка данных
- [ ] Кэширование в localStorage

### Этап 3: Генератор расписания (2 часа)
- [ ] Компонент GroupScheduleGenerator
- [ ] API для продвинутой генерации
- [ ] Интеграция с существующей страницей

### Этап 4: Три вида отображения (2 часа)
- [ ] GroupScheduleListView
- [ ] GroupScheduleWeekView  
- [ ] GroupScheduleCalendar
- [ ] Переключение между видами

### Этап 5: Массовые операции (1 час)
- [ ] Массовое удаление будущих занятий
- [ ] Массовая активация/деактивация
- [ ] Безопасность операций

### Этап 6: Тестирование и оптимизация (30 мин)
- [ ] Тестирование производительности
- [ ] Исправление ошибок
- [ ] Финальная оптимизация

## ⚡ Приоритеты
1. **Высокий:** Оптимизация загрузки данных
2. **Высокий:** Генератор расписания для группы
3. **Средний:** Три вида отображения
4. **Средний:** Массовые операции
5. **Низкий:** Дополнительные фичи

## 🎯 Ожидаемый результат
- ✅ Быстрая загрузка страницы группы
- ✅ Продвинутый генератор расписания
- ✅ Три удобных вида отображения
- ✅ Массовое управление занятиями
- ✅ Современный интерфейс

---
**Дата создания:** $(date)
**Статус:** В разработке
**Ответственный:** AI Assistant
